//=============================================================================
// Function dispatching

define dispatch : (list list -> list)
{
  [first typeof popd] dip
  switch
  call
}

define dispatch1 : (any list -> any)
{
  [unit] dip
  dispatch
  head
}

define dispatch2 : (any any list -> any)
{
  [pair] dip
  dispatch
  head
}
